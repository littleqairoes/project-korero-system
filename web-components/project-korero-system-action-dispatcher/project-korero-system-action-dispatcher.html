<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/uniflow-polymer/action-dispatcher.html">
<link rel="import" href="../../bower_components/uniflow-polymer/action-emitter.html">
<link rel="import" href="../../web-components/project-korero-system-discussion/project-korero-system-discussion-scripts.html">

<dom-module id="project-korero-system-action-dispatcher">
  <script>
    Polymer({
      is: 'project-korero-system-action-dispatcher',

      behaviors: [
        UniFlow.ActionDispatcher,
        UniFlow.ActionEmitter
      ],

      // _createNewDiscussion: function() {
      //   this.set('state.newDiscussionObject', {
      //     title: '',
      //     text: '',
      //     links: {}
      //   });
      // },

      eventFire: function() {
        return chance.string({pool: 'abcdefghijklmnopqrstuvwxyz', length: 10})
      },

      [KORERO.Actions.SET_INTERFACE_ID](details) {
        this.set('state.interfaceId', details.id);
      },

      [KORERO.Actions.SET_VIDEO](details) {
        this.set('state.videoId', details.videoId)
      },

      // events
      // to video-block
      [KORERO.Actions.START_LINKING](details) {
        this.set('state.startLinking', this.eventFire());
        this.set('state.startLinkingData', details.data || {});
      },

      // from video-block
      [KORERO.Actions.CHANGE_DISCUSSION_TIME](details) {
        this.set('state.changeDiscussionTime', this.eventFire());
        this.set('state.changeDiscussionTimeData', details.data || {});
      },

      // from video-block
      [KORERO.Actions.CHANGE_COMMENT_TIME](details) {
        this.set('state.changeCommentTime', this.eventFire());
        this.set('state.changeCommentTimeData', details.data || {});
      },

      // from video-block
      [KORERO.Actions.CHANGE_COMMENT_TIME](details) {
        this.set('state.changeCommentTime', this.eventFire());
        this.set('state.changeCommentTimeData', details.data || {});
      },

      // from video-block
      [KORERO.Actions.SAVE_LINKING](details) {
        this.set('state.saveLinking', this.eventFire());
        this.set('state.saveLinkingData', details.data || {});
      },

      // from video-block
      [KORERO.Actions.CANCEL_LINKING](details) {
        this.set('state.cancelLinking', this.eventFire());
      },

      [KORERO.Actions.CLOSE_EDIT_ACTIVITY](details) {
        this.set('state.closeEditActivity', this.eventFire());
      },

      [KORERO.Actions.CLOSE_THUMBNAIL](details) {
        this.set('state.closeThumbnails', this.eventFire());
      },

      [KORERO.Actions.READY_EDIT_ACTIVITY](details) {
        this.set('state.readyEditActivity', this.eventFire());
      },

      [KORERO.Actions.EDIT_ACTIVITY](details) {
        this.set('state.editActivity', this.eventFire());
        this.set('state.editActivityData', details.data);
      },

      [KORERO.Actions.OPEN_THUMBNAIL_BLOCK](details) {
        this.set('state.openThumbnailBlock', this.eventFire());
        this.set('state.openThumbnailBlockData', details.data)
      },

      [KORERO.Actions.TAP_NODE](details) {
        this.set('state.tapNode', this.eventFire());
        this.set('state.tapNodeData', details.data)
      },

      [KORERO.Actions.SAVE_DISCUSSION](details) {
        this.set('state.saveDiscussion', this.eventFire());
      },

      [KORERO.Actions.NEW_DISCUSSION](details) {
        this.set('state.newDiscussion', this.eventFire());
      },

      [KORERO.Actions.CLOSE_DISCUSSION](details) {
        this.set('state.closeDiscussion', this.eventFire());
      },

      [KORERO.Actions.OPEN_EDITOR_OPTIONS](details) {
        this.set('state.openEditorOptions', this.eventFire());
        this.set('state.openEditorOptionsData', details.data)
      },

      [KORERO.Actions.CLOSE_THUMBNAILS_BLOCK](details) {
        this.set('state.closeThumbnailsBlockData', details.data);
      },

      [KORERO.Actions.REMOVE_THUMBNAILS_BLOCK](details) {
        this.set('state.removeThumbnailsBlock')
      }

    });
  </script>
</dom-module>
